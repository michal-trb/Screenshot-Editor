<Window x:Class="screenerWpf.ImageEditorWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:screenerWpf"
        mc:Ignorable="d"
        Title="Image Editor" Height="450" Width="800">

    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
    </Window.Resources>
    <Window.DataContext>
        <Binding RelativeSource="{RelativeSource Self}"/>
    </Window.DataContext>
    <Window.CommandBindings>
        <CommandBinding Command="ApplicationCommands.Delete" Executed="CommandBinding_DeleteExecuted" />
    </Window.CommandBindings>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <ToolBar Grid.Row="0">
            <!-- ToolBar for editor commands like save, draw arrow, add text, etc. -->
            <Button Content="Save" Click="SaveButton_Click"/>
            <Button Content="Draw Arrow" Click="DrawArrowButton_Click"/>
            <Button Content="Add Text" Click="AddTextButton_Click"/>
            <Button Content="Draw Rect" Click="DrawRectButton_Click"/>
            <Button Content="Blur" Click="BlurButton_Click"/>
            <Button Content="Dymek Czatu" Click="SpeechBubbleButton_Click"/>
            <Button Content="Brush" Click="BrushButton_Click"/>
            <Button Content="Rozpoznaj Tekst" Click="RecognizeTextButton_Click"/>

            <!-- Nowe kontrolki do wyboru właściwości strzałki -->
            <Label Content="Kolor:" Visibility="{Binding IsColorComboBoxSelected, Converter={StaticResource BooleanToVisibilityConverter}}" />
            <ComboBox x:Name="colorComboBox" SelectionChanged="ColorComboBox_SelectionChanged" Visibility="{Binding IsColorComboBoxSelected, Converter={StaticResource BooleanToVisibilityConverter}}">
                <ComboBoxItem Content="Czarny" Background="Black"/>
                <ComboBoxItem Content="Czerwony" Background="Red"/>
                <ComboBoxItem Content="Zielony" Background="Green"/>
                <ComboBoxItem Content="Niebieski" Background="Blue"/>
                <!-- Dodaj więcej kolorów według potrzeb -->
            </ComboBox>
            <Label Content="Grubość:" Visibility="{Binding IsThicknessComboBoxSelected, Converter={StaticResource BooleanToVisibilityConverter}}" />
            <ComboBox x:Name="arrowThicknessComboBox" SelectionChanged="ArrowThicknessComboBox_SelectionChanged" Visibility="{Binding IsThicknessComboBoxSelected, Converter={StaticResource BooleanToVisibilityConverter}}">
            <ComboBoxItem Content="1"/>
                <ComboBoxItem Content="2"/>
                <ComboBoxItem Content="3"/>
                <ComboBoxItem Content="4"/>
                <ComboBoxItem Content="5"/>
                <ComboBoxItem Content="6"/>
                <ComboBoxItem Content="7"/>
                <ComboBoxItem Content="8"/>
                <ComboBoxItem Content="9"/>
                <ComboBoxItem Content="10"/>
                <!-- Dodaj więcej opcji grubości, jeśli potrzebujesz -->
            </ComboBox>

            <Label Content="Rodzaj czcionki:" Visibility="{Binding IsFontFamilySelected, Converter={StaticResource BooleanToVisibilityConverter}}" />
            <ComboBox x:Name="fontFamilyComboBox" SelectionChanged="FontFamilyComboBox_SelectionChanged" Visibility="{Binding IsFontFamilySelected, Converter={StaticResource BooleanToVisibilityConverter}}">
            </ComboBox>
            <Label Content="Rozmiar czcionki:" Visibility="{Binding IsFontSizeSelected, Converter={StaticResource BooleanToVisibilityConverter}}" />
            <ComboBox x:Name="fontSizeComboBox" SelectionChanged="FontSizeComboBox_SelectionChanged" Visibility="{Binding IsFontSizeSelected, Converter={StaticResource BooleanToVisibilityConverter}}">
            </ComboBox>
            <Label Content="Transparętność:" Visibility="{Binding IsTransparencySelected, Converter={StaticResource BooleanToVisibilityConverter}}" />
            <ComboBox x:Name="transparencyComboBox" SelectionChanged="TransparencyComboBox_SelectionChanged" Visibility="{Binding IsTransparencySelected, Converter={StaticResource BooleanToVisibilityConverter}}">
            </ComboBox>
            
        </ToolBar>
        <Viewbox Grid.Row="1" Stretch="Uniform">
            <local:DrawableCanvas x:Name="drawableCanvas" Focusable="True" MouseLeftButtonDown="Canvas_MouseLeftButtonDown" MouseLeftButtonUp="Canvas_MouseLeftButtonUp" MouseMove="Canvas_MouseMove">
                <local:DrawableCanvas.Background>
                    <ImageBrush ImageSource="{Binding initialImage, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type local:ImageEditorWindow}}}" Stretch="Uniform" />
                </local:DrawableCanvas.Background>

                <ItemsControl ItemsSource="{Binding Elements}">
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <Canvas IsItemsHost="True" />
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>
                    <ItemsControl.ItemContainerStyle>
                        <Style TargetType="{x:Type FrameworkElement}">
                            <Setter Property="Canvas.Left" Value="{Binding Position.X}" />
                            <Setter Property="Canvas.Top" Value="{Binding Position.Y}" />
                        </Style>
                    </ItemsControl.ItemContainerStyle>
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <!-- Definicja wyglądu dla IDrawable (możesz wymagać szczegółowej konfiguracji w zależności od Twoich klas) -->
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </local:DrawableCanvas>
        </Viewbox>
    </Grid>
</Window>
